"use strict";var App={};App={CONFIG:"undefined"===CONFIG?console.error("Missing config file"):CONFIG,GLOBAL:{activeToasts:0,$pace:$(".pace"),progress:{show:function(){App.GLOBAL.$pace.show().css("visibility","visible")},hide:function(){App.GLOBAL.$pace.hide().css("visibility","hidden")}},isTouch:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},$nav:$("nav")},initMap:function(){var t=new google.maps.Map(document.getElementById("map"),{center:{lat:App.CONFIG.map.lat,lng:App.CONFIG.map.lng},zoom:14,disableDefaultUI:!0,styles:App.CONFIG.map.styles});new google.maps.Marker({position:{lat:App.CONFIG.map.lat,lng:App.CONFIG.map.lng},map:t,icon:App.CONFIG.map.markerIcon,title:"Nas"})},onLoad:function(){window.onload=function(){$("#loading-overlay").fadeOut(),App.GLOBAL.progress.hide(),$(".side-menu").sideNav()}},initSideNav:function(){$("#sidenav-toggle").sideNav({closeOnClick:!0,draggable:!0})},initContactForm:function(){var t=$("#name"),e=$("#email"),a=$("#message"),o=$("#send-message"),i=a.html();o.on("click",function(n){n.preventDefault(),App._sendMessage(t,e,a,i,o)})},_sendMessage:function(t,e,a,o,i){var n=App._verifyField(t,App.CONFIG.toastMessages.nameMissing),s=App._verifyField(e,App.CONFIG.toastMessages.contactMissing),l=App._verifyField(a,App.CONFIG.toastMessages.messageMissing,o);n&&s&&l&&(App.GLOBAL.progress.show(),i.attr("disabled",!0),$.ajax({url:"/mailer/mailer.php",type:"POST",data:{name:t.html()||t.val(),email:e.html()||e.val(),message:a.html()||a.val()}}).done(function(i){"200"===i?(Materialize.toast(App.CONFIG.toastMessages.messageSent,App.CONFIG.toastSpeed,"success"),t.html("")&&t.val(""),e.html("")&&e.val(""),a.html(o)&&a.val(o),t.next().removeClass("active"),e.next().removeClass("active"),a.next().removeClass("active")):Materialize.toast(App.CONFIG.toastMessages.somethingWrong+i,App.CONFIG.toastSpeed,"error")}).error(function(t){console.error(t),Materialize.toast(App.CONFIG.toastMessages.somethingWrong+t,App.CONFIG.toastSpeed,"error")}).complete(function(){App.GLOBAL.progress.hide(),i.attr("disabled",!1)}))},_verifyField:function(t,e,a){var o,i=t.html()||t.val(),n=0===i.length;return o="undefined"!==a?n||i===a:n,"email"!==t.attr("type")||/.+\@.+\..+/.test(i)?!o||(Materialize.toast(e,App.CONFIG.toastSpeed,"error",function(){App.GLOBAL.activeToasts--}),App.GLOBAL.activeToasts++,!1):(Materialize.toast(App.CONFIG.toastMessages.enterValidEmail,App.CONFIG.toastSpeed,"error",function(){App.GLOBAL.activeToasts--}),App.GLOBAL.activeToasts++,!1)},initPostsHovers:function(){if(!this.GLOBAL.isTouch()){var t=$(".posts a"),e=$(".posts-covers > div"),a=$(".navbar-fixed");$(document).on("mouseenter",".posts a",function(){var o=$(this).data("slug");a.css("z-index",0),t.addClass("opacity"),e.removeClass("active zoom"),$("."+o).addClass("active"),setTimeout(function(){$("."+o).addClass("zoom")},1)}).on("mouseleave",".posts a",function(){a.css("z-index",""),t.removeClass("opacity"),e.removeClass("active")})}},initAnimateService:function(t){if($(document).find(t).length>0){var e=$(t),a=e.offset().top;$(document).on("scroll",function(){$(window).scrollTop()+150>a&&e.addClass("animate")})}},initNavColorChange:function(){var t=$("#triangles").height()||720;$(document).on("scroll ready",function(){$(document).find(".indexed").length>0&&App._switchNavColorSchemes(t)})},_switchNavColorSchemes:function(t){$(window).scrollTop()>t?(App.GLOBAL.$nav.addClass("dark"),$(".table-of-contents li:last-child ul").css({"background-color":"rgba(255, 255, 255, 0.97)"})):(App.GLOBAL.$nav.removeClass("dark"),$(".table-of-contents li:last-child ul").css({"background-color":"transparent"}))},initScrollSpy:function(){$(".scrollspy").scrollSpy({scrollOffset:50})},initParallax:function(){$(".parallax").parallax()},initSlider:function(){$(".slider").slider({full_width:!0,height:720})},initModal:function(){window.location.hash.length>0&&"#!"!==window.location.hash&&$(window.location.hash).openModal({complete:function(){history.replaceState("",document.title,window.location.pathname)}}),$(".modal-trigger").leanModal({opacity:.5,ready:function(){},complete:function(){history.replaceState("",document.title,window.location.pathname)}}).on("click",function(){var t=$(this).attr("href");setTimeout(function(){window.location.hash=t},400)})},initModalNav:function(){$(".modal-nav").on("click",function(t){t.preventDefault();var e=$(this),a=window.location.hash,o=e.data("next-modal"),i=e.data("previous-modal");$(a).closeModal(),void 0!==i&&$("#"+i).openModal({ready:function(){$(".modal").scrollTop(0),window.location.hash=i},complete:function(){history.replaceState("",document.title,window.location.pathname)}}),void 0!==o&&$("#"+o).openModal({ready:function(){$(".modal").scrollTop(0),window.location.hash=o},complete:function(){history.replaceState("",document.title,window.location.pathname)}})})}},$(document).on("ready",function(){App.onLoad(),App.initSideNav(),App.initPostsHovers(),App.initAnimateService(".services-section"),App.initAnimateService(".table-section"),App.initNavColorChange(),App.initScrollSpy(),App.initParallax(),App.initSlider(),App.initModal(),App.initModalNav(),App.initContactForm()});
