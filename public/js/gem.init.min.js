!function(e){"Use Strict";e(".parallax").parallax(),e(".carousel").carousel();var t,a="",i="",o="",n=window.location.href,s=window.location.origin;function r(e){return e.replace(/[0-9]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+1584)})}function l(e,t,a){return g_d_m=[0,31,59,90,120,151,181,212,243,273,304,334],e>1600?(jy=979,e-=1600):(jy=0,e-=621),gy2=t>2?e+1:e,days=365*e+parseInt((gy2+3)/4)-parseInt((gy2+99)/100)+parseInt((gy2+399)/400)-80+a+g_d_m[t-1],jy+=33*parseInt(days/12053),days%=12053,jy+=4*parseInt(days/1461),days%=1461,days>365&&(jy+=parseInt((days-1)/365),days=(days-1)%365),jm=days<186?1+parseInt(days/31):7+parseInt((days-186)/30),jd=1+(days<186?days%31:(days-186)%30),{year:jy,month:jm,day:jd}}if(s+"/profile/wallet/new"==n){var d=document.getElementById("target-credit");noUiSlider.create(d,{start:1e4,direction:"rtl",step:1e4,range:{min:1e4,max:1e6},tooltips:wNumb({decimals:0,postfix:" تومان",edit:function(e){return'<span data-value="'+e.replace(/\ تومان/g,"")+'">'+r(e)+"</span>"}}),connect:[!0,!1],pips:{mode:"values",stepped:!0,values:[1e4,25e4,5e5,75e4,1e6],density:6,format:wNumb({decimals:0,postfix:" تومان",edit:function(e){return r(e.toString())}})}}),d.noUiSlider.on("change",function(){e("#credit-details .SPD-title span").html(e("#target-credit .noUi-tooltip span").html())})}else if(s+"/profile/accounts/new"==n||s+"/profile/accounts/new/"==n)var c={status:!1,index:-1,type:null};else if(null!=n.match(new RegExp(s+"/profile/accounts/.{24}$","g"))){var p={buttonOptions:{theme:{fill:"transparent",states:{hover:{fill:"transparent"},select:{fill:"transparent"}}}},menuStyle:{margin:"10px -5px 0 0",padding:"1.2rem 1.5rem 1rem 1.5rem","box-shadow":"none","border-radius":"6px",border:"none","background-color":"rgb(247, 247, 247)"},menuItemStyle:{"border-radius":"6px",padding:"1rem","margin-bottom":"5px","font-size":"13px"},menuItemHoverStyle:{"background-color":"#5b0bbb"}},u={buttons:{contextButton:{symbol:"circle",symbolStrokeWidth:4,symbolFill:"transparent",symbolStroke:"#5b0bbb",width:20,height:20,symbolSize:20,x:-33,y:23}}},h={enabled:!1},m={borderWidth:0,shadow:!1,padding:18,pointFormatter:function(){var e=void 0!==this.y?this.y:this.value,t=void 0!==this.options.color?this.options.color:this.series.color,a="";return a+="<span>",void 0!==this.series.chart.userOptions.chart.type&&"treemap"==this.series.chart.userOptions.chart.type?a+="<span>"+this.options.name.replace(/<br>/g," ")+": </span><br>":void 0!==this.series.userOptions.type&&"pie"==this.series.userOptions.type&&(a+="<span>"+this.address+": </span><br>"),a+='<span style="font-size: 1rem; color: '+t+'">●</span> ',a+=e>1e3?10*((e/1e3).toFixed(1)%1).toFixed(1)>0?r((e/1e3).toFixed(1).toString()):r((e/1e3).toFixed(0).toString())+" هزار</span>":r(e.toString())+"</span>"}},g=function(){for(var e=0,t=0,a=this.series[0].yData.length;t<a;t++)e+=this.series[0].yData[t];this.totalTitle&&this.totalTitle.destroy();var i=this.renderer,o=this.series[0].center[0]+this.plotLeft,n=this.series[0].center[1]+this.plotTop;this.totalTitle=i.text('<tspan style="font-size: 2.5rem; text-anchor: middle;">'+r(e.toString())+"</tspan><br>",0,0).hide().add();this.totalTitle.getBBox();this.totalTitle.attr({x:o,y:n}).show()},f=JSON.parse(Cookies.get("hashed-token"));e.ajax({url:s+"/analysis/"+f.user+"/"+f.service,type:"get",success:function(e){if(200==e.meta.code){var t=e.data,a=["#6E66E6","#E84851","#F7BC5C","#8DCA5F","#A3B2B8","#41A0F1"],i=[];if(t.length>0){for(var o=t.length-1;o>=0;o--)if("periods"==t[o].service.micro_service.type){var n=t[o].service.micro_service.content.text.first+",<br>"+t[o].service.micro_service.content.text.second;if(i.length>0)for(var s=0;s<i.length;s++)i[s].name.toLowerCase()==n.toLowerCase()?i[s].value++:i.length<=6&&i.push({name:n,value:1,color:a[i.length>0?i.length-1:0]});else i.push({name:n,value:1,color:a[i.length>0?i.length-1:0]})}Highcharts.chart("periods-in-detail",{chart:{type:"treemap",borderRadius:4,spacingLeft:15,spacingRight:15},title:{text:"جزئیات زمانبندی‌ها",align:"right",margin:60,y:40,x:25},plotOptions:{series:{borderWidth:3,borderColor:"#FFFFFF",dataLabels:{style:{textOutline:"none"}},states:{hover:{enabled:!1}}}},tooltip:m,series:[{layoutAlgorithm:"squarified",data:i}],credits:h,navigation:p,exporting:u})}}else Materialize.toast(e.meta.error_message,4e3)}}),e.ajax({url:s+"/analysis/"+f.user+"/"+f.service,type:"get",success:function(e){if(200==e.meta.code){var t=e.data,a=["#6E66E6","#E84851","#F7BC5C","#8DCA5F","#A3B2B8","#41A0F1"],i=[];if(t.length>0){for(var o=t.length-1;o>=0;o--)if("locations"==t[o].service.micro_service.type){var n=t[o].service.micro_service.content.text;if(i.length>0)for(var s=0;s<i.length;s++)i[s].address.toLowerCase()==n.toLowerCase()?i[s].y++:i.length<=6&&i.push({name:n.substr(0,15)+"...",address:n,y:1,color:a[i.length>0?i.length-1:0]});else i.push({name:n.substr(0,15)+"...",address:n,y:1,color:a[i.length>0?i.length-1:0]})}Highcharts.chart("locations-in-detail",{chart:{plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1,borderRadius:4,spacingLeft:30,events:{load:g,redraw:g}},title:{text:"جزئیات موقعیت‌های جغرافیایی",align:"right",margin:60,y:40,x:10},tooltip:m,credits:h,plotOptions:{pie:{dataLabels:{enabled:!1},startAngle:0,endAngle:360,center:["50%","50%"],innerSize:"93%",borderWidth:3,showInLegend:!0}},legend:{layout:"vertical",verticalAlign:"middle",align:"left",itemMarginTop:20},series:[{type:"pie",name:"Location",data:i}],navigation:p,exporting:u})}}else Materialize.toast(e.meta.error_message,4e3)}}),e.ajax({url:s+"/analysis/"+f.user+"/"+f.service,type:"get",success:function(e){if(200==e.meta.code){var t=e.data,a=["#41A0F1","#F7BC5C","#E84851","#8DCA5F","#6E66E6"],i=[],o=[];if(t.length>0){for(var n=t.length-1;n>=0;n--)if("hashtags"==t[n].service.micro_service.type){var s="";switch(t[n].service.micro_service.content.type){case"hashtag":s="#"+t[n].service.micro_service.content.text;break;case"mention":s=t[n].service.micro_service.content.text}var l=o.indexOf(s);-1!=l?i[l].y++:o.length<=5&&i.length<=5&&(o.push(s),i.push({y:1,color:a[o.length-1]}))}Highcharts.chart("hashtags-in-detail",{chart:{type:"bar",spacingLeft:40,borderRadius:4},title:{text:"جزئیات هشتگ‌ها",align:"right",margin:60,y:40,x:0},tooltip:{enabled:!1},xAxis:{lineWidth:0,tickWidth:0,categories:o,maxPadding:.3,labels:{style:{"font-size":"1rem"}}},yAxis:{min:0,title:{text:""},visible:!1},legend:{enabled:!1},credits:h,plotOptions:{series:{colorByPoint:!0,pointWidth:10,borderRadius:6,dataLabels:{enabled:!0,formatter:function(){var e=this.point.y;return e>1e3?10*((e/1e3).toFixed(1)%1).toFixed(1)>0?r((e/1e3).toFixed(1).toString())+" هزار":r((e/1e3).toFixed(0).toString())+" هزار":e}}}},series:[{data:i}],navigation:p,exporting:u})}}else Materialize.toast(e.meta.error_message,4e3)}}),e.ajax({url:s+"/analysis/"+f.user+"/"+f.service,type:"get",success:function(e){if(200==e.meta.code){var t=e.data,a=[{name:"هشتگ‌ها",data:[0,0,0,0,0,0,0],color:"#E84851"},{name:"موقعیت‌های جغرافیایی",data:[0,0,0,0,0,0,0],color:"#41A0F1"},{name:"زمان‌بندی‌ها",data:[0,0,0,0,0,0,0],color:"#F7BC5C"}];if(t.length>0){for(var i=0;i<t.length;i++){var o=new Date(t[i].created_at),n=0;switch(t[i].service.micro_service.type){case"hashtags":n=0;break;case"locations":n=1;break;case"periods":n=2}a[n].data[o.getDay()]++}Highcharts.chart("weekly-services",{title:{text:"سرویس‌ها در طول هفته",align:"right",margin:140,y:40,x:30},chart:{type:"areaspline",borderRadius:4},tooltip:m,xAxis:{lineWidth:0,tickWidth:0,labels:{y:70},categories:["MON","TUE","WED","THU","FRI","SAT","SUN"]},yAxis:{title:{text:""},labels:{enabled:!1},gridLineWidth:2,gridLineColor:"#F3F6F7",gridLineDashStyle:"dash"},legend:{align:"right",verticalAlign:"top",y:20,x:-70},credits:h,plotOptions:{series:{fillOpacity:0,lineWidth:3,marker:{symbol:"circle",radius:5}}},series:a,navigation:p,exporting:u,responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{align:"center",verticalAlign:"top",y:60,x:0}}}]}})}}else Materialize.toast(e.meta.error_message,4e3)}})}else if(s+"/profile"==n){p={buttonOptions:{theme:{fill:"transparent",states:{hover:{fill:"transparent"},select:{fill:"transparent"}}}},menuStyle:{margin:"10px -5px 0 0",padding:"1.2rem 1.5rem 1rem 1.5rem","box-shadow":"none","border-radius":"6px",border:"none","background-color":"rgb(247, 247, 247)"},menuItemStyle:{"border-radius":"6px",padding:"1rem","margin-bottom":"5px","font-size":"13px"},menuItemHoverStyle:{"background-color":"#5b0bbb"}},u={buttons:{contextButton:{symbol:"circle",symbolStrokeWidth:4,symbolFill:"transparent",symbolStroke:"#ffffff",width:20,height:20,symbolSize:20,x:-33,y:23}}},h={enabled:!1},m={borderWidth:0,shadow:!1,padding:18,formatter:function(){return'<div style="direction: ltr !important"><span style="font-size: 10px; font-weight: bold;">'+this.point.name+'</span><br/><span style="color:'+this.point.color+'">●</span> '+r(this.point.y.toString())+" تومان</div>"}};var v=function(){for(var e=0,t=0,a=this.series[0].yData.length;t<a;t++)e+=this.series[0].yData[t];this.totalTitle&&this.totalTitle.destroy();var i=this.renderer,o=this.series[0].center[0]+this.plotLeft,n=this.series[0].center[1]+this.plotTop;this.totalTitle=i.text('<tspan style="color: #FFFFFF; font-size: 2.5rem;">'+r(e.toString())+'</tspan> <span style="color: #FFFFFF; font-size: 1rem; font-weight: 600;">تومان</span><br/>',0,0).css({textAnchor:"middle",dominantBaseline:"hanging"}).hide().add();this.totalTitle.getBBox();this.totalTitle.attr({x:o,y:n}).show()};f=Cookies.get("hashed-token");e.ajax({url:s+"/services/"+f,type:"get",success:function(t){200==t.meta.code&&(t=t.data).length>0&&(e.ajax({url:s+"/credits/"+f,type:"get",success:function(t){if(200==t.meta.code){var a=t.data,i="";if(a.length>0){if(a.length>3)for(var o=a.length-1;o>=a.length-3;o--){var n={mode:"",color:""};void 0!==a[o].balance.previous?a[o].balance.new>=a[o].balance.previous?(n.mode="trending_up",n.color="green"):(n.mode="trending_down",n.color="red"):(n.mode="trending_up",n.color="green"),i+='<div class="chip '+n.color+'"><i class="material-icons circle '+n.color+'">'+n.mode+"</i><span>"+a[o].payment.content.price+" <sup>تومان</sup></span></div>"}else for(o=0;o<a.length;o++){n={mode:"",color:""};void 0!==a[o].balance.previous?a[o].balance.new>=a[o].balance.previous?(n.mode="trending_up",n.color="green"):(n.mode="trending_down",n.color="red"):(n.mode="trending_up",n.color="green"),i+='<div class="chip '+n.color+'"><i class="material-icons circle '+n.color+'">'+n.mode+"</i><span>"+a[o].payment.content.price+" <sup>تومان</sup></span></div>"}e("#profile-dashboard-container #user-balance-detail .recommend-detail .last-credits").html(i)}}else Materialize.toast(t.meta.error_message,4e3)}}),e.ajax({url:s+"/services/grouped/"+f,type:"get",success:function(e){if(200==e.meta.code){var t=e.data.inprogress,a=["#41A0F1","#F7BC5C","#E84851","#8DCA5F"],i=[],o=[];if(t.length>0){if(t.length>4)for(var n=t.length-1;n>=t.length-4;n--){var s=new Date(t[n].created_at).getTime(),l=(new Date).getTime(),d=Math.floor((l-s)/864e5);o.push(t[n].owner.username.toUpperCase()+"<br>("+t[n].type+")"),i.push({y:d,color:a[n]})}else for(n=0;n<t.length;n++){s=new Date(t[n].created_at).getTime(),l=(new Date).getTime(),d=Math.floor((l-s)/864e5);o.push(t[n].owner.username+"<br>("+t[n].type.persian+")"),i.push({y:d,color:a[n]})}Highcharts.chart("service-time-in-detail",{chart:{type:"bar",spacingLeft:40,borderRadius:4,backgroundColor:"#5b0bbb"},title:{text:"زمان سرویس‌ها بطور خلاصه",align:"right",style:{color:"#ffffff"},margin:60,y:40,x:-320},tooltip:{enabled:!1},xAxis:{lineWidth:0,tickWidth:0,categories:o,labels:{style:{"font-size":"1rem",color:"#ffffff",direction:"ltr"}}},yAxis:{min:0,title:{text:""},visible:!1},legend:{enabled:!1},credits:h,plotOptions:{series:{colorByPoint:!0,pointWidth:10,borderWidth:0,borderRadius:6,dataLabels:{enabled:!0,style:{color:"#ffffff",textOutline:"none"},formatter:function(){var e=this.point.y;return r(e.toString())+" روز"}}}},series:[{data:i}],navigation:p,exporting:u})}}else Materialize.toast(e.meta.error_message,4e3)}}),e.ajax({url:s+"/services/"+f,type:"get",success:function(e){if(200==e.meta.code){for(var t=e.data,a=[0,0,0,0,0,0,0,0,0,0,0,0],i=0;i<t.length;i++){var o=new Date(t[i].created_at);a[l(o.getFullYear(),o.getMonth(),o.getDay()).month]++}Highcharts.chart("services-count-in-detail",{title:{text:"تعداد سرویس‌ها بطور خلاصه",align:"right",margin:140,y:40,x:-320,style:{color:"#ffffff"}},chart:{type:"areaspline",borderRadius:4,backgroundColor:"#5b0bbb"},tooltip:{borderWidth:0,shadow:!1,padding:18,formatter:function(){return'<div style="direction: ltr !important"><span style="font-size: 10px; font-weight: bold;">'+this.key+'</span><br/><span style="color:'+this.point.color+'">●</span> '+r(this.point.y.toString())+"</div>"}},xAxis:{lineWidth:0,tickWidth:0,labels:{y:70,style:{color:"#ffffff"}},categories:["فرو","ارد","خرد","تیر","مرد","شهر","مهر","آبا","آذر","دی","بهم","اسف"]},yAxis:{title:{text:""},labels:{enabled:!1},gridLineWidth:2,gridLineColor:"#7F7E80",gridLineDashStyle:"dash"},legend:{rtl:!0,align:"right",verticalAlign:"top",itemStyle:{color:"#ffffff"},y:70,x:-135,symbolWidth:80},credits:h,plotOptions:{series:{fillOpacity:0,lineWidth:3,marker:{symbol:"circle",radius:5}}},series:[{name:"تعداد",data:a,color:"#E84851"}],navigation:p,exporting:u,responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{align:"center",verticalAlign:"top",y:60,x:0}}}]}})}else Materialize.toast(e.meta.error_message,4e3)}}),e.ajax({url:s+"/services/"+f,type:"get",success:function(e){if(200==e.meta.code){var t=["#6E66E6","#E84851","#F7BC5C","#8DCA5F","#A3B2B8","#41A0F1"],a=e.data,i=[];if(a.length>0){if(a.length>6)for(var o=a.length-1;o>=a.length-6;o--)i.push({name:a[o].owner.username,y:a[o].price.total,color:t[o]});else for(o=0;o<a.length;o++)i.push({name:a[o].owner.username,y:a[o].price.total,color:t[o]});Highcharts.chart("services-price-in-detail",{chart:{plotBackgroundColor:null,plotBorderWidth:0,plotShadow:!1,borderRadius:4,spacingLeft:30,events:{load:v,redraw:v},backgroundColor:"#5b0bbb"},title:{text:"قیمت سرویس‌ها بطور خلاصه",align:"right",margin:60,y:40,x:-320,style:{color:"#ffffff"}},tooltip:m,credits:h,plotOptions:{pie:{dataLabels:{enabled:!1},startAngle:0,endAngle:360,center:["50%","50%"],innerSize:"93%",borderWidth:3,borderColor:"#5B0BBB",showInLegend:!0}},legend:{rtl:!0,layout:"vertical",verticalAlign:"middle",align:"right",itemMarginTop:20,itemStyle:{color:"#DFDFDF"},itemHoverStyle:{color:"#FFFFFF"},symbolWidth:120,x:-180},series:[{type:"pie",name:"Price",data:i}],navigation:p,exporting:u})}}else Materialize.toast(e.meta.error_message,4e3)}}))}})}else if(null!=n.match(new RegExp(s+"/profile/accounts/.{24}/scheduled/media$","g"))){var y=e("#service-scheduled-media-calendar #scheduled-media-calendar").data("hash");e.getJSON("/schedules/"+y,function(t){if(200==t.meta.code){var a=[];e.each(t.data,function(e,t){a.push({id:t._id,title:t.media.caption,start:t.scheduled_at,photo:t.media.content})});var i=moment().startOf("day");i.format("YYYY-MM"),i.clone().subtract(1,"day").format("YYYY-MM-DD"),i.format("YYYY-MM-DD"),i.clone().add(1,"day").format("YYYY-MM-DD");S({element:"#scheduled-media-calendar",header:{left:"prev,next today",center:"title",right:"month,agendaWeek,agendaDay,listWeek"},events:a,editable:!0,navLinks:!0,eventDrop:function(t,a,i){var o=(new Date).getTime(),n=new Date(t.start.format()).getTime()-o,s=Math.floor(n/864e5),r=e(this);e("#service-scheduled-media-calendar #change-event-modal").find(".modal-content h4").html(t.title),e("#service-scheduled-media-calendar #change-event-modal").find(".modal-content p").html("The event was dropped on "+(0!=s?s>0?s+" days later":Math.abs(s)+" days ago":"today")+"."),e("#service-scheduled-media-calendar #change-event-modal").openModal(),e("#service-scheduled-media-calendar #change-event-modal .change-agree").on("click",function(){var a=new Date,o={_id:r.data("hash"),scheduled_at:new Date(t.start).toISOString(),modified_at:a.toISOString()};e.ajax({url:"/schedule/"+r.data("hash")+"/set",type:"put",data:JSON.stringify(o),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){200==a.meta.code?e("#service-scheduled-media-calendar #scheduled-media-calendar").fullCalendar("updateEvent",t):(i(),Materialize.toast(a.meta.error_message,4e3))}})}),e("#service-scheduled-media-calendar #change-event-modal .change-disagree").on("click",function(){i()}),e(document).on("click",function(t){e(t.target).hasClass("lean-overlay")&&i()}),e(document).on("keyup",function(e){27==e.keyCode&&i()})}})}else Materialize.toast(t.meta.error_message,4e3)})}else if(null!=n.match(new RegExp(s+"/profile/accounts/.{24}/scheduled/media/upload$","g"))){var b=e(".media-upload-tabs li a.active").html();if(e(".media-upload-page-handler .breadcrumb").on("click",function(){if(!e(this).hasClass("activated current")){var t=e(this).index();e(".media-upload-page-handler .breadcrumb.activated.current").removeClass("current"),e(".media-upload-page-handler .breadcrumb").eq(t).addClass("current"),e("ul.tabs").tabs("select_tab",e(this).attr("value"))}}),"MUZ"===b){var w=e("#media-upload-zone #scheduled-media-upload-zone"),k="";k+='<div class="upload-pulse-container"><div class="btn-floating pulse upload-pulse"><i class="material-icons">file_upload</i></div></div><label for="upload-trigger" class="btn-floating purple-heart-dark waves-effect browse-media-btn">بارگذاری مدیای تصویری</label><input id="upload-trigger" type="file"/>',w.html(k),w.addClass("z-depth-1"),w.on("dragenter",function(e){e.stopPropagation(),e.preventDefault(),w.removeClass("z-depth-1"),w.addClass("z-depth-2"),w.find(".upload-pulse-container .upload-pulse").removeClass("pulse")}),w.on("dragleave",function(e){e.stopPropagation(),e.preventDefault(),w.removeClass("z-depth-2"),w.addClass("z-depth-1"),w.find(".upload-pulse-container .upload-pulse").hasClass("triggered")||w.find(".upload-pulse-container .upload-pulse").addClass("pulse")}),w.on("dragover",function(e){e.stopPropagation(),e.preventDefault()});var x={allow:!1,ratio:1};e(window).on("resize",function(){var t=e("#media-upload-zone #aspective-crop-modal"),a=t.find("#aspective-photo");a.css({"max-height":t.height()-180}),a.cropper()}),e("#media-upload-zone #aspective-crop-modal #media-upload-crop-photo-btn").on("click",function(){var t=e("#media-upload-zone #aspective-crop-modal"),a=t.find("#aspective-photo").cropper("getCroppedCanvas");t.find("#media-upload-change-aspect-ratio-btn").fadeOut(300),w.find(".upload-pulse-container .upload-pulse").html(""),w.find(".upload-pulse-container .upload-pulse").removeClass("pulse"),w.find(".upload-pulse-container .upload-pulse").addClass("triggered"),w.find(".upload-pulse-container .upload-pulse").css("background-image","url("+a.toDataURL("image/jpeg")+")"),e("#media-upload-zone #media-upload-write-caption-btn").removeAttr("disabled"),e("#media-upload-zone #media-upload-write-caption-btn").removeClass("disabled")}),e("#media-upload-zone #aspective-crop-modal #media-upload-change-aspect-ratio-btn").on("click",function(){var t=e("#media-upload-zone #aspective-crop-modal").find("#aspective-photo");if(x.allow)x.allow=!1,x.ratio=1;else{var a=t.width(),i=t.height(),o=1*a/(1*i);(o>1||o<1)&&(a>i?o>1.5804154303&&(o=600/337):o>.5804154303&&(o=.8)),x.allow=!0,x.ratio=o}t.cropper("setAspectRatio",x.ratio)}),w.on("drop",function(t){t.preventDefault();new FormData;var a=new FileReader,i=t.originalEvent.dataTransfer.files,o=i.length;w.css("border-color","#F8F8F8"),1===o&&(a.onload=function(t){var a=e("#media-upload-zone #aspective-crop-modal"),i=a.find("#aspective-photo");i.cropper("destroy"),i.attr({src:t.target.result}),i.css({"max-width":"100%","max-height":a.height()-180}),a.openModal();var o=i.width(),n=i.height(),s=1*o/(1*n);(s>1||s<1)&&a.find("#media-upload-change-aspect-ratio-btn").fadeIn(300);var r={aspectRatio:x.ratio,viewMode:1,responsive:!0};n>o+100&&(r.minContainerHeight=400),i.cropper(r),x.allow=!1,x.ratio=1},a.readAsDataURL(i[0]))}),w.find('input[type="file"]#upload-trigger').on("change",function(t){t.preventDefault();new FormData;var a=new FileReader,i=e(this)[0].files,o=i.length;w.css("border-color","#F8F8F8"),1===o&&(a.onload=function(t){w.find(".upload-pulse-container .upload-pulse").html(""),w.find(".upload-pulse-container .upload-pulse").removeClass("pulse"),w.find(".upload-pulse-container .upload-pulse").addClass("triggered"),w.find(".upload-pulse-container .upload-pulse").css("background-image","url("+t.target.result+")"),e("#media-upload-zone #media-upload-write-caption-btn").removeAttr("disabled"),e("#media-upload-zone #media-upload-write-caption-btn").removeClass("disabled")},a.readAsDataURL(i[0]))}),e("#media-upload-zone #media-upload-write-caption-btn").on("click",function(){var t=e(".media-upload-page-handler .breadcrumb.activated.current").index();e(".media-upload-page-handler .breadcrumb.activated.current").removeClass("current"),e(".media-upload-page-handler .breadcrumb").eq(t+1).addClass("activated current"),e("ul.tabs").tabs("select_tab","media-upload-caption")});c={status:!1,index:-1,type:null};e("#media-upload-caption #scheduled-media-upload-caption").on("keyup",function(){var t=e(this).val();if(t.length>0){switch(t[t.length-1]){case"#":var a=!1;t.length>1?" "==t[t.length-2]&&(a=!0):a=!0,a&&(c.index=t.length,c.status=!0,c.type="#");break;case"@":var i=!1;t.length>1?" "==t[t.length-2]&&(i=!0):i=!0,i&&(c.index=t.length,c.status=!0,c.type="@");break;case" ":c.index=-1,c.status=!1,c.type=null}1==c.status&&t.length-c.index>=2?e.getJSON(s+"/reveal/tokens/gemflw",function(a){if(200==a.meta.code){var i=(a=a.data).access_token;switch(c.type){case"#":var o=t.substr(c.index);e.getJSON("/api/instagram/tags/search?q="+o+"&count=5&access_token="+i,function(t){if(200==t.meta.code){var a=t.data,i="";a=a.sort(function(e,t){return t.media_count-e.media_count});for(var n=0;n<a.length;n++){var s=new RegExp("^"+o);i+='<a title="'+a[n].mediaCount+' Media" data-value="'+a[n].mediaCount+'" class="collection-item"><headline>#<span class="title">'+o+"</span>"+a[n].name.replace(s,"")+"</headline><subline>"+a[n].mediaCount+" Media</subline></a>"}e("#media-upload-caption #link-request-modal .collection.chips-dropdown").html(i),e("#media-upload-caption #link-request-modal").openModal()}else Materialize.toast(t.meta.error_message,4e3)});break;case"@":var n=t.substr(c.index);e.getJSON("/api/instagram/users/search?q="+n+"&count=4&access_token="+i,function(t){if(200==t.meta.code){var a=t.data,i="";a=a.sort(function(e,t){return t.followerCount-e.followerCount});for(var o=0;o<a.length;o++){var s=new RegExp("^"+n),r="";r=null!=a[o].username.match(s)?a[o].username:a[o].fullName,i+='<a title="'+a[o].followerCount+' Followers" data-value="'+a[o].followerCount+'" class="collection-item"><headline>@<span class="title">'+n+"</span>"+r.replace(s,"")+"</headline><subline>"+a[o].followerCount+" Followers</subline></a>"}e("#media-upload-caption #link-request-modal .collection.chips-dropdown").html(i),e("#media-upload-caption #link-request-modal").openModal()}else Materialize.toast(t.meta.error_message,4e3)})}}}):e("#media-upload-caption #link-request-modal").closeModal(),"#"!=t[t.length-1]&&"@"!=t[t.length-1]&&(e("#media-upload-caption #media-upload-set-schedule-btn").removeAttr("disabled"),e("#media-upload-caption #media-upload-set-schedule-btn").removeClass("disabled"))}else e("#media-upload-caption #media-upload-set-schedule-btn").attr("disabled","disabled"),e("#media-upload-caption #media-upload-set-schedule-btn").addClass("disabled")}),e(document).on("click","#media-upload-caption #link-request-modal .collection.chips-dropdown a",function(){var t=e(this).find("headline").text().toLowerCase().replace(/(#|@)/g,""),a=e("#media-upload-caption #scheduled-media-upload-caption").val();a=a.replaceAt(c.index,t),e("#media-upload-caption #scheduled-media-upload-caption").val(a),e("#media-upload-caption #link-request-modal").closeModal(),c.index=-1,c.status=!1,e("#media-upload-caption #scheduled-media-upload-caption").focus(),e("#media-upload-caption #scheduled-media-upload-caption").val(e("#media-upload-caption #scheduled-media-upload-caption").val()+" ")}),e("#media-upload-caption #media-upload-set-schedule-btn").on("click",function(){var t=e(".media-upload-page-handler .breadcrumb.activated.current").index();e(".media-upload-page-handler .breadcrumb.activated.current").removeClass("current"),e(".media-upload-page-handler .breadcrumb").eq(t+1).addClass("activated current"),e("ul.tabs").tabs("select_tab","media-upload-schedule");var a=e("#media-upload-schedule #scheduled-media-upload-calendar").data("hash");e.getJSON("/schedules/"+a,function(t){if(200==t.meta.code){var a=[];if(t.data.length>0)e.each(t.data,function(t,i){a.push({id:i._id,title:i.media.caption,start:i.scheduled_at,photo:i.media.content});var o=moment().startOf("day"),n=(o.format("YYYY-MM"),o.clone().subtract(1,"day").format("YYYY-MM-DD"),o.format("YYYY-MM-DD"),o.clone().add(1,"day").format("YYYY-MM-DD"),{content:e("#media-upload-zone #scheduled-media-upload-zone .upload-pulse-container .upload-pulse").css("background-image").replace(/(url\(|\))/g,""),caption:e("#media-upload-caption #scheduled-media-upload-caption").val()});S({element:"#scheduled-media-upload-calendar",customButtons:{currentEventBtn:{text:'<img src="'+n.content+'"></img><span>'+n.caption+"</span>"}},header:{left:"prev,next today",center:"title currentEventBtn",right:"month,agendaWeek,agendaDay,listWeek"},events:a,eventDrop:function(t,a,i){var o=(new Date).getTime(),n=new Date(t.start.format()).getTime(),s=n-o,l=Math.floor(s/864e5);e("#media-upload-schedule #change-event-modal").find(".modal-content h4").html(t.title),e("#media-upload-schedule #change-event-modal").find(".modal-content p").html("رویداد بر روی  "+(0!=l?l>0?r(l)+" روز بعد":r(Math.abs(l))+" روز قبل":"امروز")+"تنظیم بشود؟"),e("#media-upload-schedule #change-event-modal").openModal(),e("#media-upload-schedule #change-event-modal .change-agree").on("click",function(){e("#media-upload-schedule #scheduled-media-upload-calendar").fullCalendar("updateEvent",t),window.schedule.scheduled_at=new Date(n).toISOString()}),e("#media-upload-schedule #change-event-modal .change-disagree").on("click",function(){i()}),e(document).on("click",function(t){e(t.target).hasClass("lean-overlay")&&i()}),e(document).on("keyup",function(e){27==e.keyCode&&i()})},navLinks:!0,droppable:!0,drop:function(t){e(this).remove();var a=new Date;window.schedule={media:{content:n.content,caption:n.caption},scheduled_at:new Date(t).toISOString(),created_at:a.toISOString(),modified_at:a.toISOString()},e("#media-upload-schedule #save-schedule-btn").removeAttr("disabled"),e("#media-upload-schedule #save-schedule-btn").removeClass("disabled")},editable:!0}),e("#media-upload-schedule #scheduled-media-upload-calendar .fc-currentEventBtn-button").data("event",{title:n.caption,photo:n.content,stick:!0}),e("#media-upload-schedule #scheduled-media-upload-calendar .fc-currentEventBtn-button").draggable({revert:!0,revertDuration:0,cancel:!1})});else{var i=moment().startOf("day"),o=(i.format("YYYY-MM"),i.clone().subtract(1,"day").format("YYYY-MM-DD"),i.format("YYYY-MM-DD"),i.clone().add(1,"day").format("YYYY-MM-DD"),{content:e("#media-upload-zone #scheduled-media-upload-zone .upload-pulse-container .upload-pulse").css("background-image").replace(/(url\(|\))/g,""),caption:e("#media-upload-caption #scheduled-media-upload-caption").val()});S({element:"#scheduled-media-upload-calendar",customButtons:{currentEventBtn:{text:'<img src="'+o.content+'"></img><span>'+o.caption+"</span>"}},header:{left:"prev,next today",center:"title currentEventBtn",right:"month,agendaWeek,agendaDay,listWeek"},events:a,eventDrop:function(t,a,i){var o=(new Date).getTime(),n=new Date(t.start.format()).getTime(),s=n-o,l=Math.floor(s/864e5);e("#media-upload-schedule #change-event-modal").find(".modal-content h4").html(t.title),e("#media-upload-schedule #change-event-modal").find(".modal-content p").html("رویداد بر روی  "+(0!=l?l>0?r(l)+" روز بعد":r(Math.abs(l))+" روز قبل":"امروز")+"تنظیم بشود؟"),e("#media-upload-schedule #change-event-modal").openModal(),e("#media-upload-schedule #change-event-modal .change-agree").on("click",function(){e("#media-upload-schedule #scheduled-media-upload-calendar").fullCalendar("updateEvent",t),window.schedule.scheduled_at=new Date(n).toISOString()}),e("#media-upload-schedule #change-event-modal .change-disagree").on("click",function(){i()}),e(document).on("click",function(t){e(t.target).hasClass("lean-overlay")&&i()}),e(document).on("keyup",function(e){27==e.keyCode&&i()})},navLinks:!0,droppable:!0,drop:function(t){e(this).remove();var a=new Date;window.schedule={media:{content:o.content,caption:o.caption},scheduled_at:new Date(t).toISOString(),created_at:a.toISOString(),modified_at:a.toISOString()},e("#media-upload-schedule #save-schedule-btn").removeAttr("disabled"),e("#media-upload-schedule #save-schedule-btn").removeClass("disabled")},editable:!0}),e("#media-upload-schedule #scheduled-media-upload-calendar .fc-currentEventBtn-button").data("event",{title:o.caption,photo:o.content,stick:!0}),e("#media-upload-schedule #scheduled-media-upload-calendar .fc-currentEventBtn-button").draggable({revert:!0,revertDuration:0,cancel:!1})}}else Materialize.toast(t.meta.error_message,4e3)})}),e("#media-upload-schedule #save-schedule-btn").on("click",function(){var t=window.schedule;delete window.schedule,t.service_id=e(this).data("hash"),e.ajax({url:"/schedule/"+t.service_id+"/set",type:"post",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){200==e.meta.code?window.location.replace("/profile/accounts/"+t.service_id+"/scheduled/media"):Materialize.toast(e.meta.error_message,4e3)}})})}}function S(t){customButtons=t.customButtons||!1,editable=t.editable||!1,droppable=t.droppable||!1,eventDrop=t.eventDrop||!1,navLinks=t.navLinks||!1,drop=t.drop||!1;var a={header:t.header,eventLimit:!0,events:t.events,eventRender:function(t,a,i){switch(void 0!==t.id&&e(a).attr("data-hash",t.id),i.type){case"agendaDay":case"agendaWeek":t.photo&&(t.allDay,e(a).find(".fc-content").prepend('<div class="fc-photo"><img src="'+t.photo+'" /></div>'))}}};customButtons&&(a.customButtons=customButtons),editable&&(a.editable=editable),droppable&&(a.droppable=droppable),navLinks&&(a.navLinks=navLinks),eventDrop&&(a.eventDrop=eventDrop),drop&&(a.drop=drop),e(t.element).fullCalendar(a)}function C(e){var t,a={total:0},i=new Date(e.target.period).getTime()-new Date(e.created_at).getTime(),o=i/2592e6,n=function(e,t){var a=1;switch(e){case 3*t:a=.9;break;case 6*t:a=.8;break;case 12*t:a=.7;break;case 24*t:a=.6}return a}(i,2592e6*o),s=function(e){var t;switch(e){case 1:t=1e5;break;case 3:t=15e4;break;case 6:t=25e4;break;case 12:t=44e4;break;case 24:t=78e4}return t}(o);if(a.monthly={raw:s},e.customized){var r;switch(a.monthly.processed=n*s,a.total+=a.monthly.processed,e.plan.english.toLowerCase().replace(/ +/gi,"-")){case"starter":r=1e3;break;case"semi-starter":r=3e3;break;case"semi-intermediate":r=8e3;break;case"intermediate":r=15e3;break;case"enterprise":r=25e3;break;case"expert":r=3e4}if(e.target.followers!=r){var l=e.target.followers-r;followerCoefficient=(t=l)<=15e3?.75:t>15e3&&t<=25e3?.8:t>25e3&&t<=35e3?.85:.95,a.followers=Math.round(followerCoefficient*(l/1e3)),a.total+=a.followers}}else a.monthly.processed=n*s,a.total+=a.monthly.processed;return a}function _(e,t){var a=Cookies.get("credit");(a=a?JSON.parse(a):{})[e]=t,Cookies.set("credit",JSON.stringify(a))}function M(e,t){var a=Cookies.get("service");a=a?JSON.parse(a):{},"hashtags"==e||"locations"==e||"periods"==e?(a.micro_services||(a.micro_services={}),a.micro_services[e]=t):a[e]=t,Cookies.set("service",JSON.stringify(a))}function T(){var t=JSON.parse(Cookies.get("service"));e("ul.tabs").tabs("select_tab","authentication-level-details"),e("#authentication-level-details h3.bold span").html(t.type)}function z(t,a){e.getJSON("https://maps.googleapis.com/maps/api/geocode/json?latlng="+t.lat+","+t.lng+"&sensor=true&key=AIzaSyCQQwxmPEZPNchzrARjmY5RRpr5gzVqSWA",function(i){if("ZERO_RESULTS"!=i.status){new google.maps.Marker({position:t,map:a,icon:"/vendors/images/ui/pin.png"});var o=(i=i.results)[0].formatted_address;e("#location-service-details hashtags .chips").append('<div class="chip" title="'+o+'" data-value="'+o+'" data-latitude="'+t.lat+'" data-longitude="'+t.lng+'">'+(n=20," "!=(s=o.substr(0,n-1))[s.length-1]?s+" &hellip;":s+"&hellip;")+'<i class="material-icons close">close</i></div>')}else Materialize.toast("لطفاً یک آدرس صحیح وارد نمایید!",4e3);var n,s})}function D(a){e("ul.tabs").tabs("select_tab","location-service-details");var i={lat:35.6935862,lng:51.4426304};t=new google.maps.Map(document.getElementById("map"),{name:"#map",zoom:16,center:i,mapTypeControl:!1,zoomControl:!1,streetViewControl:!1,fullscreenControl:!1,styles:[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]}]});var n=document.createElement("div");n.id+="zoom-control";new function(e,t){var a=document.createElement("div");a.className+="zoomin",e.appendChild(a);var i=document.createElement("div");i.innerHTML='<i class="fa fa-plus" aria-hidden="true"></i>',a.appendChild(i);var o=document.createElement("div");o.className+="zoomout",e.appendChild(o);var n=document.createElement("div");n.innerHTML='<i class="fa fa-minus" aria-hidden="true"></i>',o.appendChild(n),a.addEventListener("click",function(){t.setZoom(t.getZoom()+1)}),o.addEventListener("click",function(){t.setZoom(t.getZoom()-1)})}(n,t);t.controls[google.maps.ControlPosition.TOP_LEFT].push(n);var s=document.createElement("div");s.id+="corporate";new function(e,t){var a=document.createElement("div");a.className+="corporate-brand unselectable left",a.innerHTML='<a href="/">Gem Follow</a>',e.appendChild(a);var i=document.createElement("div");i.className+="corporate-detail unselectable",i.innerHTML='Map data ©2017 Google, ZENRIN | <a href="https://www.google.com/intl/en-US_US/help/terms_maps.html">Terms of Use</a>',e.appendChild(i)}(s,t);t.controls[google.maps.ControlPosition.BOTTOM_LEFT].push(s),google.maps.event.addListener(t,"click",function(e){z({lat:e.latLng.lat(),lng:e.latLng.lng()},t)}),z(i,t);for(var r=a,l=0;l<r.length;l++)z(r[l],t);"checked"==o?e("#define-second-level-micro-service-btn").html("تنظمیات مربوط به <span>سرویس زمان‌بندی</span>"):e("#define-second-level-micro-service-btn").html("احراز حساب کاربری")}function O(t){e("ul.tabs").tabs("select_tab","period-service-details");for(var a=0;a<t.length;a++)period=t[a],c={first:{value:period.data.first,text:period.text.first},second:{value:period.data.second,text:period.text.second}},e("#period-service-details hashtags .chips").append('<div class="chip" data-first-value="'+period.data.first+'" data-second-value="'+period.text.second+'"><span>'+period.text.first+"</span>، <span>"+period.text.second+'</span><i class="material-icons close">close</i></div>');var i=new Date,o=60*i.getHours()*60+60*i.getMinutes(),n=document.getElementById("target-periods");noUiSlider.create(n,{start:[o,7200+o],range:{min:0,max:86400},step:7200,tooltips:[wNumb({decimals:0,edit:function(e){var t,a=Math.floor(e/3600),i=Math.floor(e%3600/60),o="";return a>12?(t=a-12,o="بعدازظهر"):(t=0!=a?a:12,o="قبل‌ازظهر"),'<span data-value="'+e+'">'+r((t=t.toString().length>1?t:"0"+t)+":"+(i=i.toString().length>1?i:"0"+i))+" "+o+"</span>"}}),wNumb({decimals:0,edit:function(e){var t,a=Math.floor(e/3600),i=Math.floor(e%3600/60),o="";return a>12?(t=a-12,o="بعدازظهر"):(t=0!=a?a:12,o="قبل‌ازظهر"),'<span data-value="'+e+'">'+r((t=t.toString().length>1?t:"0"+t)+":"+(i=i.toString().length>1?i:"0"+i))+" "+o+"</span>"}})],connect:[!1,!0,!1]});var s,l,d=0,c={};e("#period-service-details #period-modal").on("click",function(t){e(t.target).hasClass("modal-set")&&e(this).closeModal({complete:function(){e("#period-service-details hashtags .chips").append('<div class="chip" data-first-value="'+c.first.value+'" data-second-value="'+c.second.value+'"><span>'+c.first.text+"</span>, <span>"+c.second.text+'</span><i class="material-icons close">close</i></div>'),n.noUiSlider.set([o,7200+o]),e("#set-period").fadeOut(300)}})}),e(document).on("click",function(t){e(t.target).hasClass("lean-overlay")&&(n.noUiSlider.set([o,7200+o]),e("#set-period").fadeOut(300))}),e(document).on("keyup.leanModalmaterialize-lean-overlay-"+d,function(t){27===t.keyCode&&(n.noUiSlider.set([o,7200+o]),e("#set-period").fadeOut(300))}),n.noUiSlider.on("change",function(){"none"==e("#set-period").css("display")&&e("#set-period").fadeIn(300)}),e("#set-period a").on("click",function(){s=e("#target-periods").find(".noUi-origin").eq(0).find(".noUi-tooltip span"),l=e("#target-periods").find(".noUi-origin").eq(1).find(".noUi-tooltip span"),(c={first:{value:s.data("value"),text:s.html()},second:{value:l.data("value"),text:l.html()}}).second.value-c.first.value<=7200?(e("#period-service-details #period-modal").find(".modal-content p").html("بازه زمانی انتخابی بین <span>"+c.first.text+"</span> و <span>"+c.second.text+"</span> می‌باشد."),e("#period-service-details #period-modal").openModal({ready:function(){d++}})):Materialize.toast("شما اجازه انتخاب بازه زمانی بیش از ۲ ساعت را ندارید!",4e3)})}e("#signup-btn").on("click",function(){var t=e("#signup"),a=t.find("#email").val(),i=t.find("#password").val(),o=t.find("#re-password").val();if(t.find("#terms-cond:checked").length>0)if(t.find(".terms-cond i").fadeOut(300),""!=a&&""!=i){var n=i.match(/[a-zA-Z]+/g),s=i.match(/[0-9]+/g),r=i.match(/[!#$%@^&*()\/_~?><]+/g);if(null!=n&&null!=s&null!=r)if(i===o){var l=(new Date).toISOString(),d={email:a,password:i,created_at:l,modified_at:l,confirmation:{code:Math.floor(900*Math.random()+100)+"-"+Math.floor(900*Math.random()+100),confirmed:!1}};e.ajax({url:"/users",type:"post",data:JSON.stringify(d),contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){200==a.meta.code?(t.find("#email+label, #re-password+label, #password+label").removeClass("active"),t.find("#email, #password, #re-password").val(""),t.find("#terms-cond").removeAttr("checked"),e("ul.tabs").tabs("select_tab","login"),e("#login #email").val(d.email),e("#login #email+label").addClass("active"),e("#login #password").trigger("focus"),Materialize.toast("حساب کاربری شما با موفقیت ایجاد گردید!<br>لطفا برای تایید حساب کاربری به ایمیل خود مراجعه نمایید.",4e3)):Materialize.toast(a.meta.error_message,4e3)}})}else Materialize.toast("لطفاً مطمئن شوید که گذرواژه و تایید آن با یکدیگر برابر هستند!",4e3);else Materialize.toast("حروف بزرگ و کوچک، اعداد و یکسری از کاراکترهای خاص مجاز می‌باشد!",4e3)}else{var c="";""==a&&""==i?c+="هرد دو فیلد ":""!=a&&""==i?c+="فیلد گذرواژه ":""==a&&""!=i&&(c+="فیلد پست الکترونیک "),c+="خالی رها شده است!",Materialize.toast(c,4e3)}else t.find(".terms-cond i").fadeIn(300),Materialize.toast("لطفاً شرایط استفاده از جم‌فالو را ابتدا مطالعه و سپس آن را تایید نمایید.",4e3)}),e("#login-btn").on("click",function(){var t=e("#login"),a=t.find("#email").val(),i=t.find("#password").val(),o=t.find("#remember:checked").length>0;if(""!=a&&""!=i){var n={email:a,password:i,remember:o};e.ajax({url:"/users/auth/",type:"post",data:JSON.stringify(n),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){200==e.meta.code?window.location.replace("/profile"):Materialize.toast(e.meta.error_message,4e3)}})}else{var s="";""==a&&""==i?s+="هر دو فیلد ":""!=a&&""==i?s+="فیلد گذرواژه ":""==a&&""!=i&&(s+="فیلد پست الکترونیک "),s+="خالی رها شده است!",Materialize.toast(s,4e3)}}),e("#service-chooser .carousel-item").on("click",function(){e(this).parent().attr("data-service",e(this).data("service")),e("#choose-service-type-btn span").html(e(this).data("service"))}),e("#gateway-chooser .carousel-item").on("click",function(){e(this).parent().attr("data-service",e(this).data("service")),e("#pay-now-btn span").html(e(this).data("service"))}),e("#service-type-chooser .carousel-item").on("click",function(){e(this).parent().attr("data-plan-en",e(this).data("plan-en")),e(this).parent().attr("data-plan-fa",e(this).data("plan-fa")),e("#choose-service-detail-btn span").html(e(this).data("plan"))}),e("#choose-service-type-btn").on("click",function(){M("type",{persian:e("#service-chooser div.carousel").data("service-fa"),english:e("#service-chooser div.carousel").data("service-en")}),today=new Date,M("created_at",today.toISOString()),M("modified_at",today.toISOString()),e("ul.tabs").tabs("select_tab","service-type-chooser"),e(".carousel").carousel()}),e("#choose-service-detail-btn").on("click",function(){M("plan",{persian:e("#service-type-chooser div.carousel").data("plan-fa"),english:e("#service-type-chooser div.carousel").data("plan-en")}),e("ul.tabs").tabs("select_tab","service-plan-details");var t=1;switch(e("#service-type-chooser .carousel").data("plan-en").toLowerCase().replace(/ +/gi,"-")){case"starter":default:t=1,e("#target-month-1").attr("checked","checked");break;case"semi-starter":t=3,e("#target-month-2").attr("checked","checked");break;case"semi-intermediate":t=8,e("#target-month-2").attr("checked","checked");break;case"intermediate":t=15,e("#target-month-3").attr("checked","checked");break;case"enterprise":t=25,e("#target-month-3").attr("checked","checked");break;case"expert":t=30,e("#target-month-3").attr("checked","checked")}var a=document.getElementById("target-follower");noUiSlider.create(a,{start:t,direction:"rtl",range:{min:1,max:50},tooltips:wNumb({decimals:0,postfix:" هزار",edit:function(e){return'<span data-value="'+1e3*e.replace(/ هزار/g,"")+'">'+r(e.toString())+"</span>"}}),connect:[!0,!1],pips:{mode:"values",stepped:!0,values:[2,10,25,50],density:6,format:wNumb({decimals:0,edit:function(e){return r(e.toString())},postfix:" هزار"})}}),a.noUiSlider.on("change",function(){e("#service-plan-details .SPD-title span").html(e("#target-follower .noUi-tooltip span").html())})}),e("#target-month input[type=radio]").on("change",function(){e("#target-month h4.bold span").html(e(this).data("value-fa"))}),e("#target-micro-service input[type=checkbox]").on("change",function(){"checked"==e(this).attr("checked")?e(this).removeAttr("checked"):e(this).attr("checked","checked"),a=e("#hashtag-based-setting-checkbox").attr("checked"),i=e("#location-based-setting-checkbox").attr("checked"),o=e("#period-based-setting-checkbox").attr("checked"),"checked"==a&&"checked"==i&&"checked"==o?e("#define-next-level-type-btn").html("تعییر تنظیمات مربوط به  <span>مایکروسرویس‌ها</span>"):void 0!==a||void 0!==i||void 0!==o?e("#define-next-level-type-btn").html("تعییر تنظیمات مربوط به  <span>مایکروسرویس‌ها</span>"):e("#define-next-level-type-btn").html("احراز حساب کاربری")}),e("#define-third-level-micro-service-btn").on("click",function(){e("#hashtag-service-details hashtags .chips").material_chip({data:[{tag:"#instanature",data:3e3,type:"hashtag"},{tag:"#instaartist",data:24,type:"hashtag"},{tag:"#instafitness",data:2,type:"hashtag"}]});for(var t=[{lat:35.76909663604188,lng:51.45969271659851},{lat:35.781631070592056,lng:51.37935519218445},{lat:35.79611284503807,lng:51.43291354179382},{lat:35.734825768432756,lng:51.43325686454773},{lat:35.69356971947041,lng:51.436346769332886},{lat:35.713364137980875,lng:51.42124056816101},{lat:35.72395631456603,lng:51.49024844169617},{lat:35.72451375853924,lng:51.3381564617157}],a=[],i=[],o=[],n=0;n<t.length;n++)e.ajax({url:"https://maps.googleapis.com/maps/api/geocode/json?latlng="+t[n].lat+","+t[n].lng+"&sensor=true&key=AIzaSyCQQwxmPEZPNchzrARjmY5RRpr5gzVqSWA",type:"get",async:!1,success:function(e){if("ZERO_RESULTS"!=e.status){var t=(e=e.results)[0].formatted_address;i.push({text:t,data:{latitude:e[0].geometry.location.lat,longitude:e[0].geometry.location.lng}})}else Materialize.toast("لطفاً یک آدرس صحیح وارد نمایید!",4e3)}});e("#hashtag-service-details hashtags .chips .chip").each(function(){var t=e(this),i=t.html().toString().replace(/(#|@)/g,"").replace(/<[^>]*>/g,"");a.push({text:i,data:t.data("value"),type:t.data("type")})}),e("#period-service-details hashtags .chips .chip").each(function(){var t=e(this),a={first:t.find("span").eq(0).html().toString(),second:t.find("span").eq(1).html().toString()},i={first:a.first.replace(/<[^>]*>/g,""),second:a.second.replace(/<[^>]*>/g,"")};o.push({text:i,data:{first:t.data("first-value"),second:t.data("second-value")}})}),M("hashtags",a),M("locations",i),M("periods",o),T()}),e("#define-first-level-micro-service-btn").on("click",function(){var t=[];e("#hashtag-service-details hashtags .chips .chip").each(function(){var a=e(this),i=a.html().toString().replace(/(#|@)/g,"").replace(/<[^>]*>/g,"");t.push({text:i,data:a.data("value"),type:a.data("type")})}),M("hashtags",t),"checked"==i?D([{lat:35.76909663604188,lng:51.45969271659851},{lat:35.781631070592056,lng:51.37935519218445},{lat:35.79611284503807,lng:51.43291354179382},{lat:35.734825768432756,lng:51.43325686454773},{lat:35.69356971947041,lng:51.436346769332886},{lat:35.713364137980875,lng:51.42124056816101},{lat:35.72395631456603,lng:51.49024844169617},{lat:35.72451375853924,lng:51.3381564617157}]):"checked"==o?O([{text:{first:"۱۲:۰۰ قبل‌ازظهر",second:"۰۲:۰۰ قبل‌ازظهر"},data:{first:0,second:7200}},{text:{first:"۰۸:۰۰ قبل‌ازظهر",second:"۱۰:۰۰ قبل‌ازظهر"},data:{first:28800,second:36e3}},{text:{first:"۰۵:۰۰ بعدازظهر",second:"۰۷:۰۰ بعدازظهر"},data:{first:61200,second:68400}}]):T()}),e("#checkout-micro-service-btn").on("click",function(){e("#hashtag-service-details hashtags .chips").material_chip({data:[{tag:"#instanature",data:3e3,type:"hashtag"},{tag:"#instaartist",data:24,type:"hashtag"},{tag:"#instafitness",data:2,type:"hashtag"}]});for(var t,a=[{lat:35.76909663604188,lng:51.45969271659851},{lat:35.781631070592056,lng:51.37935519218445},{lat:35.79611284503807,lng:51.43291354179382},{lat:35.734825768432756,lng:51.43325686454773},{lat:35.69356971947041,lng:51.436346769332886},{lat:35.713364137980875,lng:51.42124056816101},{lat:35.72395631456603,lng:51.49024844169617},{lat:35.72451375853924,lng:51.3381564617157}],i=[],o=[],n=0;n<a.length;n++)e.ajax({url:"https://maps.googleapis.com/maps/api/geocode/json?latlng="+a[n].lat+","+a[n].lng+"&sensor=true&key=AIzaSyCQQwxmPEZPNchzrARjmY5RRpr5gzVqSWA",type:"get",async:!1,success:function(e){if("ZERO_RESULTS"!=e.status){var t=(e=e.results)[0].formatted_address;o.push({text:t,data:{latitude:e[0].geometry.location.lat,longitude:e[0].geometry.location.lng}})}else Materialize.toast("لطفاً یک آدرس صحیح وارد نمایید!",4e3)}});var s=[{text:{first:"۱۲:۰۰ قبل‌ازظهر",second:"۰۲:۰۰ قبل‌ازظهر"},data:{first:0,second:7200}},{text:{first:"۰۸:۰۰ قبل‌ازظهر",second:"۱۰:۰۰ قبل‌ازظهر"},data:{first:28800,second:36e3}},{text:{first:"۰۵:۰۰ بعدازظهر",second:"۰۷:۰۰ بعدازظهر"},data:{first:61200,second:68400}}];e("#hashtag-service-details hashtags .chips .chip").each(function(){var t=e(this),a=t.html().toString().replace(/(#|@)/g,"").replace(/<[^>]*>/g,"");i.push({text:a,data:t.data("value"),type:t.data("type")})}),t=s,M("hashtags",i),M("locations",o),M("periods",t);var d=e(this).data("hash-id");e.getJSON("/invoices/"+d,function(t){if(200==t.meta.code){var a=t.data,i=JSON.parse(Cookies.get("service")),o=C(i),n=new Date(i.created_at),s=l(n.getFullYear(),n.getMonth(),n.getDay()),d=s.day+" "+["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"][s.month-1]+"، "+s.year,c=function(e){var t="";switch(e){case 1:t+="تا انتهای ماه بعد";break;case 3:t+="تا انتهای سه‌ماه بعد";break;case 6:t+="تا انتهای شش‌ماه بعد";break;case 12:t+="تا انتهای سال بعد";break;case 24:t+="تا انتهای دوسال بعد"}return t}((new Date(i.target.period).getTime()-new Date(i.created_at).getTime())/2592e6);M("price",o),i.invoice={no:parseInt(a.length+1),month:c},M("invoice",i.invoice),e("#checkout-details .checkout-invoice h3.inv-no span").html("#"+r(parseInt(a.length+1).toString())),e("#checkout-details .checkout-invoice span.inv-date").html(d),e("#checkout-details .checkout-invoice div.inv-photo").css("background-image",e("#authorized-details .aside .photo div.service-photo").css("background-image")),i.customized?e("#checkout-details .checkout-invoice .inv-content td.inv-service").html("شخصی‌سازی شده"):e("#checkout-details .checkout-invoice .inv-content td.inv-service").html(i.plan.persian),e("#checkout-details .checkout-invoice .inv-content td.inv-qty").html(r((i.target.followers/1e3).toString())+" هزار"),e("#checkout-details .checkout-invoice .inv-content td.inv-month").html(c),e("#checkout-details .checkout-invoice .inv-content td.inv-price").html(r(o.total.toString())+" تومان"),e("ul.tabs").tabs("select_tab","checkout-details")}})}),e("#choose-payment-gateway-btn").on("click",function(){if(e(this).hasClass("credit-payment")){var t=new Date;_("payment",{content:{price:e("#credit-details #target-credit .noUi-tooltip span").data("value")}}),_("created_at",t.toISOString())}e("ul.tabs").tabs("select_tab","gateway-chooser")}),e("#pay-now-btn").on("click",function(){var t=e("#gateway-chooser div.carousel").data("service");if(e(this).hasClass("credit-payment")){var a=JSON.parse(Cookies.get("credit")),i={gateway:t,price:a.payment.content.price,description:"A credit payment for your own account",callback_url:s+"/profile"};a.payment.gateway=t,_("payment",a.payment),e.ajax({url:"/payment/"+(new Date).getTime().toString(16),type:"post",data:JSON.stringify(i),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){200==t.meta.code&&(a.payment.content.authority=t.data.authority,M("payment",a.payment),e.ajax({url:"/session/credit/"+a.user_id,type:"post",data:JSON.stringify(a),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){Cookies.remove("credit"),window.location.replace(t.data.url)}}))}})}else{var o=Cookies.get("service"),n=(e(this).data("hash-id"),C(o=o?JSON.parse(o):{})),r="پرداختی برای طرح "+o.type.persian+" مربوط به حساب کاربری شما.";i={gateway:t,price:n.total,description:r,callback_url:s+"/profile/accounts/new"};o.price||(o.price=n,M("price",o.price)),e.ajax({url:"/payment/"+o.owner.access_token,type:"post",data:JSON.stringify(i),async:!1,contentType:"application/json; charset=utf-8",dataType:"json",success:function(a){200==a.meta.code?(o.payment={gateway:t,content:{authority:a.data.authority}},M("payment",o.payment),e.ajax({url:"/session/service/"+o.owner.access_token,type:"post",data:JSON.stringify(o),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){Cookies.remove("service"),window.location.replace(a.data.url)}})):Materialize.toast(a.meta.error_message,4e3)}})}}),e("#pay-later-btn").on("click",function(){if(e(this).hasClass("session-saved"))window.location.replace("/profile/accounts");else{var t=Cookies.get("service");(t=t?JSON.parse(t):{}).price=C(t),M("price",t.price),e.ajax({url:"/session/service/"+t.owner.access_token,type:"post",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){Cookies.remove("service"),window.location.replace("/profile/accounts/")}})}}),e("#edit-profile .profile-uploader").on("change",function(){if(this.files&&1===this.files.length){var t=new FileReader;e("#edit-profile .profile-photo").css("background-position","center"),t.onload=function(t){e("#edit-profile .peoples-photo.profile-photo-bg .profile-photo").remove(),e("#edit-profile .peoples-photo.profile-photo-bg").addClass("regular"),e("#edit-profile .peoples-photo.profile-photo-bg form").before('<div class="profile-photo" style="background-image: url('+t.target.result+')"></div>')},t.readAsDataURL(this.files[0])}}),e("#edit-profile #name, #edit-profile #email").unbind("keyup").on("keyup",function(t){var a=e(this).attr("value");a=e(this).val(),e(this).attr("value",a)}),e("#edit-profile-btn").on("click",function(){var t={_id:e(this).data("id"),modified_at:(new Date).toISOString()};if(e("#edit-profile .profile-photo").hasClass("no-image")||(t.profile=e("#edit-profile .profile-photo").css("background-image").replace(/(url\(|\))/g,"")),""!=e("#edit-profile #name").val()&&(t.name=e("#edit-profile #name").val()),""!=e("#edit-profile #email").val()?t.email=e("#edit-profile #email").val():Materialize.toast("Email field can not be empty!",4e3),e("#edit-profile #email").val()!=e("#edit-profile #email").data("value")){var a=Math.floor(900*Math.random()+100)+"-"+Math.floor(900*Math.random()+100);t.confirmation={code:a,confirmed:!1}}""!=e("#edit-profile #email").val()&&e.ajax({url:"/users",type:"put",data:JSON.stringify(t),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){200==t.meta.code&&(e("#edit-profile #email").val()!=e("#edit-profile #email").data("value")?window.location.replace("/logout"):window.location.replace("/profile"))}})}),e("#passwd-btn").on("click",function(){var t=e("#edit-password #old-pass").val(),a=e("#edit-password #new-pass").val(),i=e("#edit-password #re-pass").val(),o={_id:e(this).data("id"),password:a,modified_at:(new Date).toISOString()};if(""!=t&&""!=a)if(a===i){var n=a.match(/[a-zA-Z]+/g),s=a.match(/[0-9]+/g),r=a.match(/[!#$%@^&*()\/_~?><]+/g);null!=n&&null!=s&null!=r?e.ajax({url:"/users/password",type:"put",data:JSON.stringify(o),contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){200==e.meta.code&&window.location.replace("/profile")}}):Materialize.toast("&mdash; Upper &amp; lowercase letters<br>&mdash; At least one number<br>&mdash; At least one special character",4e3)}else Materialize.toast("Please make sure your passwords match!",4e3);else{var l="Your ";""==t&&(l+="old password field and "),""==a&&(l+="new password field "),l+="can not be empty!",Materialize.toast(l,4e3)}}),e("#define-second-level-micro-service-btn").on("click",function(){e("#hashtag-service-details hashtags .chips").material_chip({data:[{tag:"#instanature",data:3e3,type:"hashtag"},{tag:"#instaartist",data:24,type:"hashtag"},{tag:"#instafitness",data:2,type:"hashtag"}]});var t=[],a=[];e("#hashtag-service-details hashtags .chips .chip").each(function(){var a=e(this),i=a.html().toString().replace(/(#|@)/g,"").replace(/<[^>]*>/g,"");t.push({text:i,data:a.data("value"),type:a.data("type")})}),e("#location-service-details hashtags .chips .chip").each(function(){var t=e(this),i=t.data("value").toString().replace(/(#|@)/g,"").replace(/<[^>]*>/g,"");a.push({address:i,data:{latitude:t.data("latitude"),longitude:t.data("longitude")}})}),M("hashtags",t),M("locations",a),"checked"==o?O([{text:{first:"۱۲:۰۰ قبل‌ازظهر",second:"۰۲:۰۰ قبل‌ازظهر"},data:{first:0,second:7200}},{text:{first:"۰۸:۰۰ قبل‌ازظهر",second:"۱۰:۰۰ قبل‌ازظهر"},data:{first:28800,second:36e3}},{text:{first:"۰۵:۰۰ بعدازظهر",second:"۰۷:۰۰ بعدازظهر"},data:{first:61200,second:68400}}]):T()}),e("#authenticate-service-btn").on("click",function(){var t=e(this).data("hash-id"),a=e("#authentication-level-details #auth-username").val(),i=e("#authentication-level-details #auth-password").val();if(""!=a&&""!=i)auth={user_id:t,username:a,password:i},e.ajax({url:"/api/instagram/users",type:"post",data:JSON.stringify({username:auth.username,password:auth.password}),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){if(200==t.meta.code){var a=t.data;a.username=auth.username,a.password=auth.password,e.ajax({url:"/profile/accounts/authorization",type:"post",data:JSON.stringify(a),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){200==t.meta.code&&(M("owner",t.data),function(){var t=JSON.parse(Cookies.get("service"));switch(t.type.english.toLowerCase()){case"instagram":e.getJSON("/api/instagram/users?access_token="+t.owner.access_token,function(a){if(200==a.meta.code){var i=e("#authorized-details .aside"),o=a.data;t.owner=o,M("owner",t.owner),i.find(".photo .service-photo").css("background-image","url("+o.picture+")"),i.find(".details h3.bold").html(o.username),void 0!==o.website&&i.find(".details").append("<span><strong>"+o.website+"</strong></span>"),void 0!==o.biography&&i.find(".details").append("<p>"+o.biography+"</p>"),e("ul.tabs").tabs("select_tab","authorized-details")}else Materialize.toast(a.meta.error_message,4e3)});break;case"twitter":alert("تعریف نشده است")}}())}})}else Materialize.toast(t.meta.error_message,4e3)}});else{var o="";""==a&&(o+=""!=o?" and username":"Username"),""==i&&(o+=""!=o?" and password":"Password"),Materialize.toast(o+" can not be empty!",4e3)}}),e("#define-next-level-type-btn").on("click",function(){var t,n=e('#service-plan-details #target-month input[name="target-month"]:checked').val(),s=e("#service-plan-details #target-follower .noUi-tooltip span").data("value"),r=(e("#service-type-chooser div.carousel").data("plan-en"),""),l=JSON.parse(Cookies.get("service")),d=new Date(l.created_at);switch(2e3!=s&&5e3!=s&&1e4!=s&&M("customized",!0),n){case"1 Month":r=new Date(d.getTime()+2592e6).toISOString();break;case"3 Month":r=new Date(d.getTime()+7776e6).toISOString();break;case"6 Month":r=new Date(d.getTime()+15552e6).toISOString();break;case"1 Year":r=new Date(d.getTime()+31104e6).toISOString(),M("customized",!0);break;case"2 Year":r=new Date(d.getTime()+62208e6).toISOString(),M("customized",!0)}M("target",{followers:e("#service-plan-details #target-follower .noUi-tooltip span").data("value"),period:r}),a=e("#hashtag-based-setting-checkbox").attr("checked"),i=e("#location-based-setting-checkbox").attr("checked"),o=e("#period-based-setting-checkbox").attr("checked"),"checked"==a?(t=[{tag:"#instanature",data:3e3,type:"hashtag"},{tag:"#instaartist",data:24,type:"hashtag"},{tag:"#instafitness",data:2,type:"hashtag"}],e("ul.tabs").tabs("select_tab","hashtag-service-details"),e("#hashtag-service-details hashtags .chips").material_chip({data:t}),"checked"==i?e("#define-first-level-micro-service-btn").html("تنظمیات مربوط به <span>موقعیت جغرافیایی</span>"):"checked"==o?e("#define-first-level-micro-service-btn").html("تنظمیات مربوط به <span>سرویس زمان‌بندی</span>"):e("#define-first-level-micro-service-btn").html("احراز حساب کاربری")):"checked"==i?D([{lat:35.76909663604188,lng:51.45969271659851},{lat:35.781631070592056,lng:51.37935519218445},{lat:35.79611284503807,lng:51.43291354179382},{lat:35.734825768432756,lng:51.43325686454773},{lat:35.69356971947041,lng:51.436346769332886},{lat:35.713364137980875,lng:51.42124056816101},{lat:35.72395631456603,lng:51.49024844169617},{lat:35.72451375853924,lng:51.3381564617157}]):"checked"==o?O([{text:{first:"۱۲:۰۰ قبل‌ازظهر",second:"۰۲:۰۰ قبل‌ازظهر"},data:{first:0,second:7200}},{text:{first:"۰۸:۰۰ قبل‌ازظهر",second:"۱۰:۰۰ قبل‌ازظهر"},data:{first:28800,second:36e3}},{text:{first:"۰۵:۰۰ بعدازظهر",second:"۰۷:۰۰ بعدازظهر"},data:{first:61200,second:68400}}]):T()}),e(document).on("keyup","#hashtag-service-details hashtags .chips input",function(){var t=e(this),a=t.val();if(a.length>0){switch(a[0]){case"#":default:var i=!1;a.length>1?" "==a[a.length-2]&&(i=!0):i=!0,i&&(c.index=1,c.status=!0,c.type="#");break;case"@":var o=!1;a.length>1?" "==a[a.length-2]&&(o=!0):o=!0,o&&(c.index=1,c.status=!0,c.type="@")}1==c.status&&a.length-c.index>=2?e.getJSON(s+"/reveal/tokens/gemflw",function(i){if(200==i.meta.code){var o=(i=i.data).access_token;switch(c.type){case"#":var n=a.substr(c.index);e.getJSON("/api/instagram/tags/search?q="+n+"&count=5&access_token="+o,function(e){if(200==e.meta.code){var a=e.data,i="";a=a.sort(function(e,t){return t.mediaCount-e.mediaCount});for(var o=0;o<a.length;o++){var s=new RegExp("^"+n);i+='<a title="'+a[o].mediaCount+' Media" data-type="hashtag" data-value="'+a[o].mediaCount+'" class="collection-item"><headline>#<span class="title">'+n+"</span>"+a[o].name.replace(s,"")+"</headline><subline>"+a[o].mediaCount+" Media</subline></a>"}t.parent().parent().find(".chips-dropdown").html(i),t.parent().parent().find(".chips-dropdown").fadeIn(300)}else Materialize.toast(e.meta.error_message,4e3)});break;case"@":var s=a.substr(c.index);e.getJSON("/api/instagram/users/search?q="+s+"&count=4&access_token="+o,function(e){if(200==e.meta.code){var a=e.data,i="";a=a.sort(function(e,t){return t.followerCount-e.followerCount});for(var o=0;o<a.length;o++){var n=new RegExp("^"+s),r="";r=null!=a[o].username.match(n)?a[o].username:a[o].fullName,i+='<a title="'+a[o].followerCount+' Followers" data-type="mention" data-value="'+a[o].followerCount+'" class="collection-item"><headline>@<span class="title">'+s+"</span>"+r.replace(n,"")+"</headline><subline>"+a[o].followerCount+" Followers</subline></a>"}t.parent().parent().find(".chips-dropdown").html(i),t.parent().parent().find(".chips-dropdown").fadeIn(300)}else Materialize.toast(e.meta.error_message,4e3)})}}}):t.parent().parent().find(".chips-dropdown").fadeOut(300)}else t.parent().parent().find(".chips-dropdown").fadeOut(300)}),e(document).on("blur","#hashtag-service-details hashtags .chips input",function(){""!=e(this).val()&&e(this).parent().parent().find(".chips-dropdown").fadeOut(300)}),e(document).on("focus","#hashtag-service-details hashtags .chips input",function(){""!=e(this).val()&&e(this).parent().parent().find(".chips-dropdown").fadeIn(300)}),e(document).on("click","#hashtag-service-details hashtags .chips-dropdown a",function(){e(this).parent().parent().find(".chips input").before('<div class="chip" data-type="'+e(this).data("type")+'" data-value="'+e(this).data("value")+'">'+e(this).find("headline").text().toLowerCase()+'<i class="material-icons close">close</i></div>'),e(this).parent().parent().find(".chips input").val(""),e(this).parent().parent().find(".chips-dropdown").fadeOut(300)}),e("#search-location").on("click",function(){var a=e("#location_search").val();a=a.replace(/ +/g,"+"),e.getJSON("https://maps.googleapis.com/maps/api/geocode/json?address="+a+"&sensor=true&key=AIzaSyCQQwxmPEZPNchzrARjmY5RRpr5gzVqSWA",function(a){if("ZERO_RESULTS"!=a.status){var i=(a=a.results)[0].geometry.location;t.setCenter(i)}else e("#location_search").val(""),Materialize.toast("Please Type a Valid Address!",4e3)})}),e("#location_search").on("keyup",function(t){13==t.keyCode&&e("#search-location").trigger("click")}),e(document).ajaxStart(function(){e("#loading-overlay").css({display:"block","max-height":"5rem","background-color":"#040404"}),e("#pace").css({display:"block",visibility:"visible",right:"calc(50% - 9px)",top:"calc(2.5rem - 9px)"}),e("#pace .pace-activity").css({"border-width":"3px",width:"18px",height:"18px","border-top-color":"#fff","border-left-color":"#fff"})}),e(document).ajaxStop(function(){e("#loading-overlay").css({display:"none","max-height":"none","background-color":"#fff"}),e("#pace").css({display:"none",visibility:"hidden",right:"1rem",top:"1rem"}),e("#pace .pace-activity").css({"border-width":"2px",width:"14px",height:"14px","border-top-color":"#040404","border-left-color":"#040404"})}),e(window).on("resize",function(){e(".carousel").carousel()}),String.prototype.replaceAt=function(e,t){return this.substr(0,e)+t+this.substr(e+t.length)},Date.prototype.getMonthName=function(){return["January","February","March","April","May","June","July","August","September","October","November","December"][this.getMonth()]}}(jQuery);
